<!DOCTYPE html><html><head>
      <title>week3_notes</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      
      <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css">
      
      

      
      
      
      
      
      

      <style>
      pre{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;direction:ltr;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;padding:1em;margin:.5em 0;overflow:auto;line-height:1.5;tab-size:4;hyphens:none;color:#c5c8c6;background-color:#27292c !important;border:#43484c;border-radius:3px}pre[class*="language-"]{padding:1em}code[class*="language-"] .token.comment,pre[class*="language-"] .token.comment,code[class*="language-"] .token.prolog,pre[class*="language-"] .token.prolog,code[class*="language-"] .token.doctype,pre[class*="language-"] .token.doctype,code[class*="language-"] .token.cdata,pre[class*="language-"] .token.cdata{color:#7C7C7C}code[class*="language-"] .token.punctuation,pre[class*="language-"] .token.punctuation{color:#96CBFE}code[class*="language-"] .namespace,pre[class*="language-"] .namespace{opacity:.7}code[class*="language-"] .token.constant,pre[class*="language-"] .token.constant{color:#99CC99}code[class*="language-"] .token.boolean,pre[class*="language-"] .token.boolean,code[class*="language-"] .token.number,pre[class*="language-"] .token.number,code[class*="language-"] .token.function-name,pre[class*="language-"] .token.function-name{color:#FF73FD}code[class*="language-"] .token.tag,pre[class*="language-"] .token.tag{color:#96CBFE}code[class*="language-"] .token.selector,pre[class*="language-"] .token.selector{color:#96CBFE}code[class*="language-"] .token.attr-name,pre[class*="language-"] .token.attr-name{color:#C6C5FE}code[class*="language-"] .token.string,pre[class*="language-"] .token.string{color:#A8FF60}code[class*="language-"] .token.char,pre[class*="language-"] .token.char{color:#FF8000}code[class*="language-"] .token.entity,pre[class*="language-"] .token.entity{color:#FFD2A7}code[class*="language-"] .token.url,pre[class*="language-"] .token.url{color:#7C7C7C}code[class*="language-"] .token.operator,pre[class*="language-"] .token.operator{color:#EDEDED}code[class*="language-"] .token.atrule,pre[class*="language-"] .token.atrule,code[class*="language-"] .token.attr-value,pre[class*="language-"] .token.attr-value,code[class*="language-"] .token.keyword,pre[class*="language-"] .token.keyword{color:#CFCB90}code[class*="language-"] .token.function,pre[class*="language-"] .token.function{color:#FFD2A7}code[class*="language-"] .token.class-name,pre[class*="language-"] .token.class-name{color:#FFD2A7}code[class*="language-"] .token.variable,pre[class*="language-"] .token.variable{color:#C6C5FE}code[class*="language-"] .token.regex,pre[class*="language-"] .token.regex,code[class*="language-"] .token.important,pre[class*="language-"] .token.important{color:#E9C062}code[class*="language-"] .token.important,pre[class*="language-"] .token.important,code[class*="language-"] .token.bold,pre[class*="language-"] .token.bold{font-weight:bold}code[class*="language-"] .token.italic,pre[class*="language-"] .token.italic{font-style:italic}code[class*="language-"] .token.entity,pre[class*="language-"] .token.entity{cursor:help}pre[data-line]{position:relative;padding:1em 0 1em 3em}pre[data-line] .line-highlight-wrapper{position:absolute;top:0;left:0;background-color:transparent;display:block;width:100%}pre[data-line] .line-highlight{position:absolute;left:0;right:0;padding:inherit 0;margin-top:1em;background:rgba(153,122,102,0.08);background:linear-gradient(to right, rgba(153,122,102,0.1) 70%, rgba(153,122,102,0));pointer-events:none;line-height:inherit;white-space:pre}pre[data-line] .line-highlight:before,pre[data-line] .line-highlight[data-end]:after{content:attr(data-start);position:absolute;top:.4em;left:.6em;min-width:1em;padding:0 .5em;background-color:rgba(153,122,102,0.4);color:#f5f2f0;font:bold 65%/1.5 sans-serif;text-align:center;vertical-align:.3em;border-radius:999px;text-shadow:none;box-shadow:0 1px white}pre[data-line] .line-highlight[data-end]:after{content:attr(data-end);top:auto;bottom:.4em}html body{font-family:"Helvetica Neue",Helvetica,"Segoe UI",Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#ccc;background-color:#141414;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#fff}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#a3a3a3}html body strong{color:#fff}html body del{color:#a3a3a3}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ul,html body>ol{margin-bottom:16px}html body ul,html body ol{padding-left:2em}html body ul.no-list,html body ol.no-list{padding:0;list-style-type:none}html body ul ul,html body ul ol,html body ol ol,html body ol ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#a3a3a3;border-left:4px solid #3d3d3d}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#3d3d3d;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:bold;color:#fff}html body table td,html body table th{border:1px solid #3d3d3d;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:bold}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em !important;color:#fff;background-color:#282828;border-radius:3px;padding:.2em 0}html body code::before,html body code::after{letter-spacing:-0.2em;content:"\00a0"}html body pre>code{padding:0;margin:0;font-size:.85em !important;word-break:normal;white-space:pre;background:transparent;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;font-size:.85em !important;line-height:1.45;border:#3d3d3d;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:before,html body pre tt:before,html body pre code:after,html body pre tt:after{content:normal}html body p,html body blockquote,html body ul,html body ol,html body dl,html body pre{margin-top:0;margin-bottom:16px}html body kbd{color:#fff;border:1px solid #3d3d3d;border-bottom:2px solid #2e2e2e;padding:2px 4px;background-color:#282828;border-radius:3px}@media print{html body{background-color:#141414}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#fff;page-break-after:avoid}html body blockquote{color:#a3a3a3}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body pre,html body code{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview .pagebreak,.markdown-preview .newpage{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center !important}.markdown-preview:not([for="preview"]) .code-chunk .btn-group{display:none}.markdown-preview:not([for="preview"]) .code-chunk .status{display:none}.markdown-preview:not([for="preview"]) .code-chunk .output-div{margin-bottom:16px}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0}@media screen and (min-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{font-size:14px !important;padding:1em}}@media print{html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,0.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{padding:0 1.6em;margin-top:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc li{margin-bottom:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{list-style-type:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% -  300px);padding:2em calc(50% - 457px -  150px);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}
/* Please visit the URL below for more information: */
/*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */

      </style>
    </head>
    <body for="html-export">
      <div class="mume markdown-preview  ">
      <h1 class="mume-header" id="gpr103-week3-inheritance-and-polymorphism">GPR103 week3 - Inheritance and Polymorphism.</h1>

<p>Designing objects with reuse and extension in mind.</p>
<div class="code-chunk" data-id="code-chunk-id-0" data-cmd="toc"><div class="input-div"><div class="btn-group"><div class="run-btn btn"><span>&#x25B6;&#xFE0E;</span></div><div class="run-all-btn btn">all</div></div><div class="status">running...</div></div><div class="output-div"></div></div><ul>
<li><a href="#gpr103-week3-inheritance-and-polymorphism">GPR103 week3 - Inheritance and Polymorphism.<br>
</a>
<ul>
<li><a href="#last-week-and-homework"> Last week and homework<br>
</a></li>
<li><a href="#inheritance"> Inheritance<br>
</a>
<ul>
<li><a href="#examples-of-inheritance"> Examples of inheritance<br>
</a></li>
<li><a href="#why-inheritance-in-programming"> Why inheritance in programming?<br>
</a></li>
<li><a href="#towers-to-build"> Towers to build<br>
</a>
<ul>
<li><a href="#base-tower"> Base Tower<br>
</a></li>
<li><a href="#towercs"> Tower.cs<br>
</a></li>
<li><a href="#unique-towers"> Unique towers<br>
</a></li>
<li><a href="#gattlingtowercs"> GattlingTower.cs<br>
</a></li>
<li><a href="#missiletowercs"> MissileTower.cs<br>
</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#polymorphism"> Polymorphism<br>
</a></li>
<li><a href="#getting-abstract"> Getting Abstract<br>
</a>
<ul>
<li><a href="#overriding-functions-and-the-virtual-keyword"> Overriding functions and the <code>virtual</code> keyword<br>
</a>
<ul>
<li><a href="#snippet-towercs"> Snippet: Tower.cs<br>
</a></li>
<li><a href="#snippet-gattlingtowercs"> Snippet: GattlingTower.cs<br>
</a></li>
<li><a href="#snippet-missiletowercs"> Snippet: MissileTower.cs<br>
</a></li>
</ul>
</li>
<li><a href="#partial-code-reuse-with-the-base-keyword"> Partial code reuse with the <code>base</code> keyword<br>
</a>
<ul>
<li><a href="#snippet-towergattlingcs"> Snippet: TowerGattling.cs<br>
</a></li>
</ul>
</li>
<li><a href="#abstract"> Abstract<br>
</a>
<ul>
<li><a href="#whats-better-than-hoping-spitting-out-errors"> What&#x2019;s better than hoping? Spitting out errors!<br>
</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#exercises"> Exercises<br>
</a></li>
<li><a href="#resources"> Resources<br>
</a></li>
</ul>
</li>
</ul>
<h2 class="mume-header" id="last-week-and-homework">Last week and homework</h2>

<p>Last week&#x2019;s topic was <strong>Object oriented design</strong>, specifically <strong>Encapsulation through Classes, Access Modifiers, Properties</strong></p>
<p>Part 1 of assignment.</p>
<ul>
<li>Did we get there?</li>
<li>Did it make more sense once you&#x2019;d translated the ideas to your own class?</li>
<li>Did you come up with questions?</li>
</ul>
<h2 class="mume-header" id="inheritance">Inheritance</h2>

<p>Humans are pattern seeking machines. <strong>We look for things that are related, we group them, and then we find heirarchies to put them in</strong>. Inheritance here is less the idea of recieving your parents property and more your inheritance of their genes. You have what they had, modified.</p>
<blockquote>
<p>Inheritance in programming is receiving the properties and abilities of another class/object while adding your own on top, and even modifying/replacing some of what you received.</p>
</blockquote>
<p>It&#x2019;s like genetic inheritance, but it&#x2019;s also like how products/designs inherit elements from earlier products. Or how a PC inherits all the stuff Intel put in the CPU and chipset.</p>
<p>We can do this because of the <strong>encapsulation</strong> we did last week. How on earth would you even approach this if things weren&#x2019;t globbed into Classes?</p>
<h3 class="mume-header" id="examples-of-inheritance">Examples of inheritance</h3>

<p><img src="assets/week3/controllers_geneology.jpg" alt="Controller Geneology"><br>
<em>Blurry but lovingly made geneology of controllers - <a href="https://www.flickr.com/photos/maisonbisson/2646315272/">Casey Bisson</a></em></p>
<p>Nintendo have been real diversity generators of console controllers. The NES pad created a new family, then the SNES pad with shoulder buttons, the N64 controller with its analogue sticks. Each set the stage for the next, old features rarely disappeared.</p>
<blockquote>
<p>Classic programming class examples are <code>Canine::Dog::Labrador</code>, <code>Vehicle::Car::Hatchback::Jazz</code>. Notice <code>Canine</code> and <code>vehicle</code> are both fairly abstract; mostly words you see on forms. With each stage you get more concrete.</p>
</blockquote>
<p>Game engines evolve too. Here&#x2019;s a link to one tree of FPS engines: <a href="assets/week3/fps_geneology.png">fps engine inheritance</a></p>
<h3 class="mume-header" id="why-inheritance-in-programming">Why inheritance in programming?</h3>

<ol>
<li>It helps us think about things. We can break a program down into units and understand their relationships. Especially true in games, which are basically simulations of (parts of) worlds.</li>
<li>Avoids loads of duplicated code. If you have to change something basic about towers, like the code to click on them or place them, who wants to change every single tower type?</li>
<li>Inheritance gives you stuff for free. Who doesn&#x2019;t love free stuff?</li>
<li>Extending (inheriting from) a class lets you take something useful but generic and make it more specific.</li>
</ol>
<h3 class="mume-header" id="towers-to-build">Towers to build</h3>

<p>We had a Fireball Tower last week. This week we&#x2019;re cloning Field Runners 2 and want a <strong>Gattling (gun) Tower</strong> and a <strong>Missile Tower</strong>.</p>
<p><img src="assets/week3/tower_fr_gattling.jpg" alt="Gattling"><br>
<em>Gattling guns are the spinny ones</em></p>
<p><img src="assets/week3/tower_fr_missile.jpg" alt="Missiles"><br>
<em>Missiles in an array (hint?)</em></p>
<p><strong>1:</strong> Gattling fire is effectively hitscan (instant hit), missiles are projectiles<br>
<strong>3:</strong> Gattling fire is nonstop. Missiles fire in volleys.<br>
<strong>4:</strong> Gattling towers add turrets. Missile towers just fire more rounds, maybe more damaging missiles?</p>
<hr>
<h4 class="mume-header" id="base-tower">Base Tower</h4>

<p>It&#x2019;s pretty obvious that we&#x2019;ll be starting from the base <code>Class Tower</code> here and extending it. What&#x2019;s common to both towers?</p>
<p><strong>Class: Tower</strong></p>
<ul>
<li>Attributes (information):
<ul>
<li><code>health</code>, <code>position</code>, <code>currentLevel</code>, <code>ready</code> (not building/levelling up)</li>
</ul>
</li>
<li>Functions:
<ul>
<li><code>build()</code>, <code>collapse()</code>, <code>levelUp()</code></li>
</ul>
</li>
</ul>
<p>We won&#x2019;t go nuts and define a full game ready tower for this exercise.</p>
<h4 class="mume-header" id="towercs">Tower.cs</h4>

<pre data-role="codeBlock" data-info="cs" class="language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">.</span>Collections<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic<span class="token punctuation">;</span>
<span class="token keyword">using</span> UnityEngine<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Tower</span> <span class="token punctuation">:</span> <span class="token class-name">MonoBehaviour</span>
<span class="token punctuation">{</span>
	<span class="token keyword">protected</span> <span class="token keyword">int</span> _health 		<span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
	<span class="token keyword">protected</span> <span class="token keyword">int</span> _level 		<span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
	
	<span class="token keyword">protected</span> <span class="token class-name">Vector2</span> _position<span class="token punctuation">;</span>
    
	<span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">Build</span><span class="token punctuation">(</span><span class="token class-name">Vector2</span> position<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        _position <span class="token operator">=</span> position<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">LevelUp</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;Levelling up&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    
    <span class="token keyword">public</span> <span class="token keyword">int</span> CurrentLevel
    <span class="token punctuation">{</span>
        <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _level<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

	<span class="token keyword">public</span> <span class="token keyword">int</span> Health
	<span class="token punctuation">{</span>
		<span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _health<span class="token punctuation">;</span> <span class="token punctuation">}</span>
		<span class="token keyword">set</span> <span class="token punctuation">{</span> _health <span class="token operator">=</span> <span class="token keyword">value</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
	<span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">Collapse</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;Collapse.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</pre><blockquote>
<p>Some <strong>terms used for a base class</strong>: parent, ancestor, base, super.</p>
</blockquote>
<hr>
<h4 class="mume-header" id="unique-towers">Unique towers</h4>

<p>Now our derived classes. Each is &#x201C;derived&#x201D; from Tower.</p>
<blockquote>
<p><strong>Class GattlingTower</strong>:</p>
<ul>
<li><code>turrets</code>, <code>damagePerSecond</code></li>
</ul>
<p><strong>Class MissileTower</strong>:</p>
<ul>
<li><code>pods</code>, <code>firingRate</code>, <code>damagePerProjectile</code>, <code>fire()</code></li>
</ul>
</blockquote>
<p><img src="assets/week3/sprite_gattling_tower.png" alt="Gattling Tower"></p>
<h4 class="mume-header" id="gattlingtowercs">GattlingTower.cs</h4>

<pre data-role="codeBlock" data-info="cs" class="language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">.</span>Collections<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic<span class="token punctuation">;</span>
<span class="token keyword">using</span> UnityEngine<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">GattlingTower</span> <span class="token punctuation">:</span> <span class="token class-name">Tower</span> <span class="token punctuation">{</span>

    <span class="token keyword">protected</span> <span class="token keyword">int</span> _turrets <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token keyword">int</span> _damagePerSecond <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span>

    <span class="token comment">// Use this for initialization</span>
    <span class="token keyword">void</span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;I am Gattling.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> DamagePerSecond
    <span class="token punctuation">{</span>
        <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _damagePerSecond<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</pre><p><img src="assets/week3/sprite_missile_tower.png" alt="Missile Tower"></p>
<h4 class="mume-header" id="missiletowercs">MissileTower.cs</h4>

<pre data-role="codeBlock" data-info="cs" class="language-csharp"><span class="token keyword">using</span> System<span class="token punctuation">.</span>Collections<span class="token punctuation">;</span>
<span class="token keyword">using</span> System<span class="token punctuation">.</span>Collections<span class="token punctuation">.</span>Generic<span class="token punctuation">;</span>
<span class="token keyword">using</span> UnityEngine<span class="token punctuation">;</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MissileTower</span> <span class="token punctuation">:</span> <span class="token class-name">Tower</span>
<span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">int</span> _firingRate <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">float</span> _damagePerProjectile <span class="token operator">=</span> <span class="token number">1.0f</span><span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token keyword">const</span> <span class="token keyword">int</span> NUM_PODS <span class="token operator">=</span> <span class="token number">9</span><span class="token punctuation">;</span>

    <span class="token keyword">void</span> <span class="token function">Start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;I am Missile.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">float</span> DamagePerProjectile
    <span class="token punctuation">{</span>
        <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _damagePerProjectile<span class="token punctuation">;</span> <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">int</span> FiringRate
    <span class="token punctuation">{</span>
        <span class="token keyword">get</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> _firingRate<span class="token punctuation">;</span>  <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">Fire</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;Fire!&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</pre><blockquote>
<p><strong>Food for thought:</strong> both towers <strong>track</strong> their opponents, but some won&#x2019;t. Where do we implement it? Doesn&#x2019;t really belong in a generic tower, but also duplication is bad. This is where <code>Class TrackingTower</code> might come up. Or we might want to mix inheritance and composition designs.</p>
</blockquote>
<h2 class="mume-header" id="polymorphism">Polymorphism</h2>

<p>One thing taking on multiple forms.</p>
<p><img src="assets/week3/pokemon_bludgie.png" alt="Bludgie"><br>
<em>They&#x2019;re all Bludgie though really - Aussie Pokedex by Paul Robertson</em></p>
<p>A bunch of towers can all return a type, a cost, an id, a footprint. They can be asked to level up, take damage, build, collapse/refund. We don&#x2019;t need to know what type of tower we have for those generic things. That means we can handle them in a collection as plain old Towers - using them as their base class.</p>
<p>Here&#x2019;s how it might look if we were using basic classes like last week:</p>
<pre data-role="codeBlock" data-info="cs" class="language-csharp"><span class="token comment">// List uses base type `Tower` even though we never make an instance of `Tower` directly.</span>
List<span class="token operator">&lt;</span>Tower<span class="token operator">&gt;</span> towers <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token generic-method"><span class="token function">List</span><span class="token punctuation">&lt;</span><span class="token class-name">Tower</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// We can add in anything that extended/derived from `Tower`</span>
towers<span class="token punctuation">.</span><span class="token keyword">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">GattlingTower</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
towers<span class="token punctuation">.</span><span class="token keyword">add</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MissileTower</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

towers<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">build</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</pre><p>Here&#x2019;s how it looks in the TowerTester class I&#x2019;ve provided in the Unity demo scene. This uses a public list to hold the Towers, and we fill it using the Inspector.</p>
<pre data-role="codeBlock" data-info="cs" class="language-csharp"><span class="token comment">// Usual Unity includes go here</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TowerTester</span> <span class="token punctuation">:</span> <span class="token class-name">MonoBehaviour</span> <span class="token punctuation">{</span>

    <span class="token keyword">public</span> List<span class="token operator">&lt;</span>Tower<span class="token operator">&gt;</span> towers<span class="token punctuation">;</span>

	<span class="token keyword">void</span> <span class="token function">Start</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;TowerTester says hi&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;towers.Count = &quot;</span> <span class="token operator">+</span> towers<span class="token punctuation">.</span>Count<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">int</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>

        <span class="token comment">// do this until we run out of towers</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> towers<span class="token punctuation">.</span>Count<span class="token punctuation">)</span>
        <span class="token punctuation">{</span>
            <span class="token comment">// Call Build on all our towers</span>
            towers<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Vector2</span><span class="token punctuation">(</span><span class="token number">1.0f</span><span class="token punctuation">,</span> <span class="token number">2.0f</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            i<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</pre><p>A bit like boxes can be stacked regardless of contents, or a bottle of softdrink stored, cooled, poured.</p>
<h2 class="mume-header" id="getting-abstract">Getting Abstract</h2>

<p>There are a few reasons want to make a base class, and they aren&#x2019;t all covered by simple inheritance of variables and functions. We need more flexibility.</p>
<blockquote>
<p>Reasons we might want to inherit include:</p>
<ol>
<li>So we don&#x2019;t have to write the same code over and over. We just call the function, say<code>Build(position)</code>, in the base.</li>
<li>Because we know all <code>Tower</code> objects will do a thing. The problem is we only know the first bit of how they&#x2019;ll do it.</li>
<li>Aaactually maybe we don&#x2019;t know how to do any of it yet. But we definitely want them all to <code>Build(position)</code>.</li>
</ol>
</blockquote>
<h3 class="mume-header" id="overriding-functions-and-the-virtual-keyword">Overriding functions and the <code>virtual</code> keyword</h3>

<p>If you want the base class to define the function and then change how it works, you can <strong>override the function</strong>. This is common to many languages but uses differing syntax. In <em>c#</em> we add <code>virtual</code> to the function definition in the base class, and the same function definition with <code>override</code> in the derived class&#x2026; then we change the contents.</p>
<p>Let&#x2019;s override the Build function. In a real game the build sequence of towers might need some custom code, and the inherited function might not be enough. For this demo, however, we&#x2019;re going to log a unique string to the console for each tower and GattlingTower will reveal its coordinates.</p>
<h4 class="mume-header" id="snippet-towercs">Snippet: Tower.cs</h4>

<pre data-role="codeBlock" data-info="cs" class="language-csharp"><span class="token comment">// Note the virtual keyword. It allows overrides.</span>
<span class="token keyword">public</span> <span class="token keyword">virtual</span> function <span class="token function">Build</span> <span class="token punctuation">(</span><span class="token class-name">Vector2</span> position<span class="token punctuation">)</span>
<span class="token punctuation">{</span>	
	Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;Building Tower&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</pre><h4 class="mume-header" id="snippet-gattlingtowercs">Snippet: GattlingTower.cs</h4>

<pre data-role="codeBlock" data-info="cs" class="language-csharp"><span class="token comment">// note override in place of virtual here</span>
<span class="token keyword">public</span> <span class="token keyword">override</span> function <span class="token function">Build</span> <span class="token punctuation">(</span><span class="token class-name">Vector2</span> position<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;Building GattlingTower at coordinates &quot;</span> <span class="token operator">+</span> gameObject<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token string">&quot;, &quot;</span> <span class="token operator">+</span> gameObject<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</pre><h4 class="mume-header" id="snippet-missiletowercs">Snippet: MissileTower.cs</h4>

<pre data-role="codeBlock" data-info="cs" class="language-csharp"><span class="token comment">// note override in place of virtual here</span>
<span class="token keyword">public</span> <span class="token keyword">override</span> function <span class="token function">Build</span> <span class="token punctuation">(</span><span class="token class-name">Vector2</span> position<span class="token punctuation">)</span>
<span class="token punctuation">{</span>
  Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;Building MissileTower&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</pre><blockquote>
<p>Say you have a list of type <code>Tower</code> and you call Build on a <code>MissileTower</code> in that list. If you get the output from <code>Tower.Build</code> instead of <code>MissileTower.Build</code> you&#x2019;ve probably left out <code>override</code>.</p>
</blockquote>
<h3 class="mume-header" id="partial-code-reuse-with-the-base-keyword">Partial code reuse with the <code>base</code> keyword</h3>

<p>Overriding the function has come at a cost: no free code from the parent class! At least for that function. What if we could have it both ways?</p>
<p>How can we alter our <code>Build(position)</code> function to call Tower.Build and still do something unique? We can <strong>call functions in the base class with the <code>base</code> keyword</strong>.</p>
<h4 class="mume-header" id="snippet-towergattlingcs">Snippet: TowerGattling.cs</h4>

<pre data-role="codeBlock" data-info="cs" class="language-csharp"><span class="token comment">// We can call it explicitly.</span>
    <span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">void</span> <span class="token function">Build</span><span class="token punctuation">(</span><span class="token class-name">Vector2</span> position<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// Use base to call Build on Tower()</span>
        <span class="token keyword">base</span><span class="token punctuation">.</span><span class="token function">Build</span><span class="token punctuation">(</span>position<span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token comment">// Do Gattling specific things</span>
          
      Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span><span class="token string">&quot;Building GattlingTower at coordinates &quot;</span> <span class="token operator">+</span> gameObject<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">.</span>x <span class="token operator">+</span> <span class="token string">&quot;, &quot;</span> <span class="token operator">+</span> gameObject<span class="token punctuation">.</span>transform<span class="token punctuation">.</span>position<span class="token punctuation">.</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// I removed the : base (position) example here because it only worked on constructors.</span>

</pre><p>Output:</p>
<pre data-role="codeBlock" data-info class="language-"><code>Building Tower
Gattling.Build() here, just logging.
</code></pre><h3 class="mume-header" id="abstract">Abstract</h3>

<p>When none of the code in the base is useful, we an just override the whole <code>virtual function</code>. We can even leave the <code>virtual function</code> empty in base. The problem of course, is making sure the next coder to inherit your class actually does it. How?</p>
<blockquote>
<p>We could make an empty function and put a comment asking all other coders to make sure to override it with their own code. But they might miss/ignore the comment.</p>
</blockquote>
<h4 class="mume-header" id="whats-better-than-hoping-spitting-out-errors">What&#x2019;s better than hoping? Spitting out errors!</h4>

<p>The <code>abstract</code> keyword lets us define a function with no content. It also fails to compile unless the function is overriden by any Class that inherits from it.</p>
<p><code>abstract</code> is like virtual in that it allows methods to be overridden. It&#x2019;s much more useful though, in that it can be used for Classes and variables.</p>
<blockquote>
<p>Objects can&#x2019;t be made from abstract classes. Only classes derived from them can be made. <code>new Tower()</code> won&#x2019;t work. <code>new GattlingTower()</code> will.</p>
</blockquote>
<pre data-role="codeBlock" data-info="cs" class="language-csharp"><span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name">Tower</span>
<span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">abstract</span> <span class="token keyword">void</span> <span class="token function">Build</span> <span class="token punctuation">(</span><span class="token class-name">Vector2</span> position<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// ---</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">TowerGattling</span>
<span class="token punctuation">{</span>
	<span class="token keyword">public</span> <span class="token keyword">override</span> <span class="token keyword">void</span> <span class="token function">Build</span><span class="token punctuation">(</span><span class="token class-name">Vector2</span> position<span class="token punctuation">)</span>
	<span class="token punctuation">{</span>
		<span class="token comment">// build</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</pre><h2 class="mume-header" id="exercises">Exercises</h2>

<ol>
<li>Assignment 1, exercise 2.
<ul>
<li><a href="https://laureate-au.blackboard.com/bbcswebdav/pid-7197505-dt-content-rid-11808948_1/xid-11808948_1">Direct blackboard Link</a></li>
<li>As you come across issues, or even before you start, watch the unity videos in 2.</li>
</ul>
</li>
<li>Unity tutorial videos covering this week
<ul>
<li><a href="https://unity3d.com/learn/tutorials/s/scripting">the scripting section</a></li>
<li>Tutes: <em>Inheritance</em>, <em>Polymorphism</em>, <em>Overriding</em> and <em>Lists &amp; Dictionaries</em>.</li>
<li>Watch the videos, and type in the code so you really remember it.</li>
</ul>
</li>
</ol>
<h2 class="mume-header" id="resources">Resources</h2>

<ol>
<li><a href="assets/week3/TowerInheritance.zip">Download my TowerInheritance Unity project</a></li>
<li>Microsoft c# docs. This isn&#x2019;t a complete list: you should be getting in the habit now of looking these up for specifics and handy extras.
<ul>
<li><a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/virtual">virtual</a></li>
<li><a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/keywords/abstract">abstract</a></li>
<li><a href="https://docs.microsoft.com/en-us/dotnet/api/system.collections.generic.list-1?view=netframework-4.7.2">List</a></li>
</ul>
</li>
</ol>

      </div>
      
      
    
    
    
    
    
    
    
    
  
    </body></html>